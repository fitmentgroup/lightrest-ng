!function(){"use strict";angular.module("lightrest",[]),angular.module("lightrest").factory("lightrest",["$http","$q",function(r,e){function n(r){return JSON.parse(JSON.stringify(r))}function t(r,e){for(var n=e.split(".");n.length&&(r=r[n.shift()]););return r}function o(r,e){if(void 0===e.baseUrl||e.baseUrl===!0)e.baseUrl="/api";else if(e.baseUrl===!1)e.baseUrl="";else if(!("string"==typeof e.baseUrl||e.baseUrl instanceof String))throw new Error("baseUrl option can only be one of these: undefined true false string");if(void 0===e.arrayMode);else if("concurrent"==e.arrayMode);else if("sequential"!=e.arrayMode)throw new Error("arrayMode option should be one of these: undefined 'concurrent' 'sequential'");if(void 0===e.body)e.body=r.method&&"get"!=r.method.toLowerCase()?!0:!1;else if(e.body===!1);else if(e.body===!0);else if(!("string"==typeof e.body||e.body instanceof String))throw new Error("body option should be one of these: undefined true false string");if(void 0===e.query)e.query=r.method&&"get"!=r.method.toLowerCase()?!1:!0;else if(e.query===!1);else if(e.query===!0);else if(!("string"==typeof e.query||e.query instanceof String))throw new Error("query option should be one of these: undefined true false string");if(void 0===e.urlParams)e.urlParams=!0;else if(e.urlParams===!0);else if(e.urlParams!==!1)throw new Error("urlParams option can only be one of these: undefined true false")}function i(i,a){function u(e){e||(e={});var o=n(i);if(a.urlParams&&(o.url=o.url.replace(/:([\w.]+)/g,function(r,n){var o=new Error("Url parameter "+n+" was not included in the data");if(!e)throw o;var i=t(e,n);if(null==i)throw o;if(i=i.toString(),!i)throw o;return i})),"/"!=o.url[0]&&(o.url="/"+o.url),o.url=a.baseUrl+o.url,a.body){var u="string"==typeof a.body||a.body instanceof String?t(e,a.body):e;o.data=u}if(a.query&&void 0!==e){var u="string"==typeof a.query||a.query instanceof String?t(e,a.query):e;o.params=u}return{run:function(){return r(o)}}}return i||(i={}),a||(a={}),o(i,a),"/"==a.baseUrl.slice(-1)&&(a.baseUrl=a.baseUrl.slice(0,-1)),function(r){if(!a.arrayMode)return u(r).run();for(var n=[],t=r.length,o=0;t>o;o++)n.push(u(r[o]));if("concurrent"==a.arrayMode){for(var o=0;t>o;o++)n[o]=n[o].run();return e.all(n)}if("sequential"==a.arrayMode){var t=n.length,o=-1,i=function(){return o++,o>=t?!0:n[o].run().then(i,i)};return i()}}}var a={build:i};return a}])}();